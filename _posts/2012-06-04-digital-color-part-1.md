---
layout: post
title: Digital Color Part 1
date: 2012-06-04 15:54
author: ventspace
comments: true
categories: [Graphics, Photography]
---
What do you know about how computers read, store, process, and display colors? If your answer is R, G, and B color channels in the range of [0, 255], go hang your head in shame -- and no credit for alpha/transparency channels. If you said spanning [0, 1], that's very slightly better. More points if you mentioned HSV, YUV, YcbCr, etc. Less points if you didn't mention sRGB. Extra credit if you thought about gamma curves or color temperatures, and a highly approving nod if the word "gamut" crossed your mind. Yes, today we're going to be talking about color spaces, gamuts, color management, bit depth, and all the fun stuff that defines digital color. I've been doing a lot of photography work recently, and it's brought a number of things to the forefront which I did not previously understand and of which I haven't seen concise, centralized discussion. Most of this applies equally well to digital image <em>capture</em> (cameras, scanners), digital image <em>rendering</em> (offline or real time), and digital image <em>reproduction</em> (monitors, printers). Understand in advance that I'm trying to distill a book's worth of theory into a blog post. This will be fast, loose, and cursory at best, but hopefully it's enough of a glimpse to be enlightening. I'm multi-targeting this post for software engineers (game developers mainly), artists and photographers. We'll see how that goes.

I decided to write this post after an incident where a self-portrait turned my skin distinctly pink when I uploaded it to Facebook. (I'm brown-skinned.) I went into significant depth trying to understand why, and found out that there is a lot of complexity in digital color that is not well explained in a unified format. This was originally intended to be a single monster post, but it's just too much material to pack into one blog entry. I think I could write a small eBook if I really went into detail. In this first part, I'll just be talking about representation of color tones, independent of brightness. Part 2 will talk about brightness, luminance, gamma, dynamic range,  and so on. Part 3 will discuss the details of how devices reproduce colors and how we can work with multiple devices correctly.

<h1>Colors in Real Life</h1>
I do not want to talk about real life colors. That is an enormously complicated (and fairly awesome) topic that integrates physics, optics, biology, neurology, and cognitive studies. I just want to cover enough of the basics to allow us to discuss <em>digital</em> colors. Real life has a lot of colors. An infinite number of colors. Humans can perceive a limited number of these colors which exist in the visible spectrum. Each color represents a spectrum of light, which our eyes receive as an R/G/B triplet of information (for the purposes of this discussion). There are many discrete spectrums that we cannot differentiate and thus appear as the same color even though they're not. This ambiguity shows up very strongly in people suffering from any type of color blindness. For a normal person, we can describe the total range of colors perceived and graph it on what's known as a <i>chromaticity</i> diagram:
<a href="http://en.wikipedia.org/wiki/File:CIExy1931.png"><img src="http://upload.wikimedia.org/wikipedia/commons/b/b0/CIExy1931.png" alt="CIE 1931 color diagram" width="400" /></a>
This is called the <a href="http://en.wikipedia.org/wiki/CIE_1931_color_space">CIE 1931 color space</a>. The full range of color perception forms a 3D volume region. The X and Y axes shown above describe the chromaticity of color, and the Z axis is brightness. This diagram represents a slice through that volume at 50% brightness. As an added bonus, this diagram will look different in different browsers if you have any type of calibrated or high end monitor. That's a hint about the rabbit hole we're about to enter. The colors on the diagram are merely an illustrated aid, not actual colors. It's also a single 2D slice through a 3D volume of colors, with the third axis being brightness. We'll talk more about brightness in Part 2. For now, just assume that the graph describes the total range of colors we can perceive, and values outside the colored area may as well not exist. This chart will be our basis for the discussion of digital color.

<h1>Colors on Digital Devices</h1>
You might know that most computer monitors are able to express about 16.8 million discrete color values in 24 bits per pixel. That sounds like a lot of colors, but it isn't. It translates to 256 discrete values from 8 bits for each of red, blue, and green color channels, and 256 total levels of luminance covering 8  <i>stops</i> (one stop represents a doubling of light intensity). That means that for any given luminance level, you can describe 65536 different colors. So already a lot of our possible values have been spent on just describing luminance, leaving us very few to encode the actual shade of color. It's not even adequate to express real luminance values; a typical high end digital camera can capture 12-14 stops in a single scene, and human perception can span 20+ stops. In short, we'd need nearly all of our 24 bits just to express all of the levels of luminance that humans can perceive, let alone the color range.

Because we're talking about digital color, we have another problem -- the mediums we work with cannot hope to cover the totality of human vision. Cameras, scanners, monitors, and printers have limitations in the colors they can understand and reproduce. More infuriatingly, each device has its own independent gamut of colors that does not match up with any other device. You've probably seen a printer vomit out colors that don't match your screen. In many cases, the printer can  <i>never</i> match your screen. When you take a photo and import it to a computer, you get  <i>two</i> color shifts, first in the camera's capture and processing and second in your computer's processing and display. Send the image to someone else and it shifts again. Is the color on screen really related to the color in real life anymore? Take a photo of a leaf, then bring it inside and put it up against your computer screen. Go ahead and scan it too. Odds are the scan, photo, and leaf are all radically different colors when you see them side by side.

In Part 3 of this series, I'll go into detail about how the different categories of digital devices detect or reproduce colors at a hardware level. These engineering details have a very real effect on our color workflow, and will be important in understanding how to compromise effectively across different hardware. There's no point getting an image perfect on a computer screen if its final destination is print. Reconciling the differences in hardware and producing your desired colors anywhere will be our overarching goal for this series.

One last footnote: most digital cameras output JPEG images by default. These images are not relevant to a serious discussion of color, as they tend to interpret the digital sensor's data rather creatively. Instead we will be talking about the RAW format data that higher quality digital cameras can optionally produce directly from the image sensor. These files are usually proprietary but there are many common software packages that can read them, and produce more even-handed representations of the sensor data. These color-accurate conversions will be the focus for the photography aspects of this discussion. The same applies to video data, with the caveat that consumers don't have cameras that can produce RAW video data files at all. 

<h1>Terminology</h1>
With that series of observations, it's time to get a little bit more formal and look at what is going on. Let's start with some proper definitions of terms I've been throwing around:<ul>
<li><strong>Color space:</strong> This is a mathematically defined subset of colors. It's a <i>theoretical</i> construct, independent of any digital device or bit depth.</li>
<li><strong>Color gamut:</strong> This is a description of the colors a given device can actually produce, and will vary per device. The gamut can be adjusted on many devices.</li>
<li><strong>Color calibration:</strong> The process of matching a device's gamut to a desired color space.</li>
<li><strong>Luminance:</strong> An absolute measure of the intensity of light, independent of any device or perception.
<li><strong>Brightness:</strong> The subjective perception of luminance.
<li><strong>Stop:</strong> A difference of one <a href="http://en.wikipedia.org/wiki/Exposure_value">exposure value</a>. This is a measure of light, and an increase of one stop represents a doubling of the photon flux (roughly, density).</li>
<li><strong>Chromaticity:</strong> An objective, physical description of a color independent of any device or perception.
<li><strong>Bit depth/bits per pixel:</strong> The number of bits we use to describe the value of an individual image pixel. With n bits, we can express 2<sup>n</sup> different values.</li>
<li><strong>RGB:</strong> The general idea of encoding a pixel value using a set of three values that describe the strength of red, blue, and green to be combined. This is the native operation mode of nearly all digital devices.</li>
<li><strong>White point/balance:</strong> The physical definition of the color considered "white", independent of luminance.</li>
<li><strong>Color temperature:</strong> A thermodynamics-derived value expressing a pure color of light that would be emitted by a body at that temperature. These are the colors we associate with stars. Trust me, you don't want more detail.</li></ul>
That's just to start us off, we'll meet more terms along the way.

<h1>Spaces and Gamuts</h1>
Let's start with computer monitors, as they are probably the easiest to understand. Above, I showed you the CIE 1931 color space describing the totality of human color perception. Monitors cannot express anything close to that range. Instead, monitors have traditionally tried to match an alternate, much smaller space known as <a href="http://en.wikipedia.org/wiki/SRGB">sRGB</a>. If you graph sRGB, it forms a triangle on top of CIE 1931 like this:
<a href="http://commons.wikimedia.org/wiki/File:CIExy1931_sRGB.png"><img src="http://upload.wikimedia.org/wikipedia/commons/a/a8/CIExy1931_sRGB.png" width="400" /></a>
sRGB was created in 1996 by Microsoft and HP in order to match the capabilities of existing CRT displays, applying a formal mathematical structure. When people talk about RGB colors, they are almost certainly referring to values within the sRGB color space, where each value represents the weight applied to a weighted average of the three points of the sRGB triangle. Thus for any RGB value, you can pinpoint one location on the graph which is the desired color. A perfectly calibrated monitor will generate exactly that color when given the matching RGB value. In reality, the monitor's triangle tends to be slightly misaligned. In any case, this is the color range that nearly the entire world uses for nearly everything. Most of the software on your computer doesn't understand that anything else exists.

It should be blatantly obvious at this point that sRGB is very small. Compared to our full perceptual range, it misses an awful lot and you can begin to see why our leaf doesn't match anything the monitor can display. There are a number of other color spaces out there:
<a href="http://commons.wikimedia.org/wiki/File:Colorspace.png"><img src="http://upload.wikimedia.org/wikipedia/commons/3/37/Colorspace.png" width="400"></a>
AdobeRGB in particular has gained significant popularity, as a number of cameras and monitors support it and it is nearly identical to the NTSC color space standard for televisions. When we're talking about monitors, we typically express the gamut as a percentage coverage of the NTSC space. The sRGB space represents a 70% gamut; a modern high end Dell UltraSharp will do about 110%. These monitors still take those same 24 color bits, but spread them over a wider area (actually, volume). These high end monitors are called <i>wide gamut</i> displays and they come with a very nasty catch.

<b>Color values appear completely different on wide gamut displays</b>. Those [0, 255] values for each channel represent different points in the color spectrum, spread farther apart. A wide gamut is a double edged sword because it represents a larger, more saturated space with less detail within the space. sRGB can describe smaller changes in color than AdobeRGB, but AdobeRGB can express more extreme colors than sRGB. This leads to nasty, unpleasant accidents if you're not careful. Here's a screenshot of two applications displaying exactly the same image:
<a href="http://ventspace.files.wordpress.com/2012/05/color-space.jpg"><img src="http://ventspace.files.wordpress.com/2012/05/color-space.jpg?w=400" alt="" title="color-space" class="alignnone size-medium wp-image-829" /></a>
Notice the massive shift in the red? The application on the left is MS Paint; the application on the right is Adobe Lightroom. Lightroom is a photo post-processing tool which is fully <i>color-aware</i>. The pixels of this image are stored in the sRGB color space, but my monitor is not in sRGB. Windows knows the model of my monitor and has downloaded a <i>color profile</i>, which tells it the attributes of my monitor's color rendition. Lightroom knows this, and alters the image using the color profile to look correct on my monitor. Paint, however, has no clue about color profiles, and simply forwards the pixel data blindly to the monitor. The monitor's wider color space causes a massive boost in saturation, changing my neighbor's tastefully red house into a eye-searing abomination.

This can happen in reverse too. If you've got a nice image in AdobeRGB, it will look washed out and generally bad in sRGB mode. It will look even worse if you don't print it correctly. Even if you do interpret it correctly, there are problems. AdobeRGB is a larger space than sRGB, so colors you can see on a wide gamut monitor simply won't exist for an sRGB monitor and color saturation will get squished. Because so few people have wide gamut monitors, and because print gamuts are so much smaller, working on a wide gamut AdobeRGB display can be a dicey proposition. Making use of those extra colors may not pay dividends, and you may wind up with an image that cannot even be displayed correctly for your intended audience. As a result, it's extremely important to understand which applications are color managed, what color space you're working on, and what will happen when you produce the final image for other people to view. I call applications that use color management profiles <em>color-aware</em>, and others <em>color-stupid</em> (not a technical term). 

<h1>Color Aware Software (on Windows 7)</h1>
Mac is traditionally much better about color management than Windows, due to the long graphic design history. Windows 7 does have full color management support, but following the tradition of Windows, most applications blithely ignore it. The first step is making sure you have a full color profile for your monitor. I won't provide instructions on that here; it is usually automatic or derived from color calibration which we'll discuss shortly. The second, somewhat more difficult step is making sure that your applications are all color-aware. On Windows 7, this is the situation:<ul>
<li><strong>Windows Explorer:</strong> Fully color aware. Your thumbnails are correct.</li>
<li><strong>Windows Photo Viewer:</strong> Fully color aware. This is the default image preview tool, so when you're previewing images all is well.</li>
<li><strong>MS Office 2010:</strong> Fully color-aware, pleasantly enough.</li>
<li><strong>MS Paint:</strong> Completely color-stupid.</li>
<li><strong>Internet Explorer 9:</strong> Aware of image profiles, but ignores monitor profiles and blindly outputs everything as sRGB. Your IE colors are all rendered wrong on a wide gamut display. This despite the fact that IE specifically advertises color-awareness.</li>
<li><strong>Mozilla Firefox:</strong> Fully color aware, but images that don't specify a profile explicitly are assumed to match the monitor. You probably want FF to assume they're sRGB, which is a hidden setting in about:config. Change gfx.color_management.mode to 2.</li>
<li><strong>Google Chrome:</strong> Completely color-stupid.</li>
<li><strong>Google Picasa:</strong> Fully color-aware, but not by default. Enable it in the View menu of Picasa and both the organizer tool and the preview tool become fully aware. You want to do this.</li>
<li><strong>Adobe Anything:</strong> Fully color-aware, and pretty much the standard for color management -- EXCEPT PREMIERE.</li>
<li><strong>Corel Paintshop Pro:</strong> Fully color-aware, but glitchy for no apparent reason in the usual Corel way.</li>
<li><strong>Blender:</strong> Almost completely color-stupid.</li>
<li><strong>The GIMP:</strong> Fully color-aware, but ignores the system settings by default. Go into Edit-&gt;Preferences, Color Management tab, and check "Try to use the system monitor profile". This is an important step if you're using GIMP on a wide gamut or calibrated monitor.</li>
<li><strong>Visual Studio:</strong> Color-stupid, which is disappointing but not surprising.</li>
<li><strong>Video players:</strong> Blatant color-stupidity across the board. WMP, Quicktime, VLC, and MPC all failed my test.</li>
<li><strong>Video games/3D rendering:</strong> Hah, not a chance. All color-stupid. Don't count on 3D modeling tools to be color-aware in 3D mode either. The entire Autodesk suite of tools (3DS Max, Maya, Softimage, Mudbox) are all incorrect in this respect.</li>
</ul>
Given Mac's longer legacy in graphic design, it is probably safe to assume that all image applications are color-aware. I know Chrome and Safari both handle colors correctly on Mac, for example. I have not yet tested video or 3D on Mac with a wide gamut display, but I suspect that they will <i>not</i> handle colors correctly.

<h1>Bit Depth</h1>
We've covered the idea that colors are expressed in a color space. Mathematically, a color space is a polygon on the chromaticity diagram; we'll assume it's always a triangle. A color represents a point inside this triangle, and any color can be represented as a weighted average of the three points on the triangle. These weighted averages form what we commonly refer to as the RGB value. In its purest form, the RGB value is a normal length vector of three coordinates in the interval [0, 1]. We traditionally also have an intensity value which gives the overall color luminance. In practical terms, we store the colors differently; the RGB value that most people are familiar with expresses the intensity of each of red, green, and blue color values (called channels). These are ratios between 0 (black) and 1 (fully saturated single color), and together they describe both a color and an intensity for that color. This is not the only representation; many televisions use YCbCr, which stores the luminance Y and two of the three color weights, Cb and Cr. You can compute the third color weight quite easily, and so these different representations (and many others, like HSV) are all basically equivalent. Hardware devices natively work with RGB intensities though, so that's the color representation we will stick to.

Because computers don't really like working with decimal numbers, we usually transform the [0, 1] range for the RGB channels into a wide range that we can describe using only integers. Most people are familiar with the [0, 255] range seen in many art programs such as Photoshop. This representation assigns an 8 bit integer to each color channel, which can store up to 256 values. With three channels of 256 values each, we have a total of 256<sup>3</sup> colors, 16,777,216 in all. Computers have used this specification for many years, calling it TrueColor, 24 bit color, millions of colors, or something along those lines. I've already mentioned that this is a very limiting space of colors in many ways. It's often adequate for our final images, but we really want much better color fidelity, especially in the process of editing or rendering our images. Otherwise, every image adjustment will cause rounding errors that cause our colors to subtly drift, eventually causing significant damage to color accuracy.

If you've worked with digital camera data, you probably know that most do not only use 8 bits per color channel. It's typical for high end cameras to use 12 or even 14 bits for their internal data, yielding raw image files of 36 or 42 bits per pixel. Modern computer graphics applications and games use 16 or even 32 bits per color channel, totaling 48 or 96 bits of color information per pixel. Even though that level of detail is not necessary for the final image, it is important that we store the images as accurately as possible while working on them to avoid losing data before we are ready.

This problem extends to monitors, too. The vast majority of LCD monitors on the market only have 6 -- that's <i>six</i> -- bits per color channel, and use various tricks to display the missing colors. (Yes, even many high end IPS type screens.) For many years, this meant that doing serious imaging work on LCDs was out of the question; you either used an older CRT or a very expensive design grade LCD. Nowadays, the color replication on quality 6 bit monitors like my Dell UltraSharp U2311H is excellent, and I don't have any qualms in recommending one of these monitors for serious graphics work. I've compared the output side by side to my real 8 bit monitors and there is a difference, but it is minute and only visible in a direct comparison or test charts.

However, there is another consideration. I hinted earlier that wide gamut can hurt color accuracy. When using a wide gamut monitor, those color bits are stretched over a wider range of colors than normal. Because the bit depth hasn't changed, we can no longer represent as many colors within the smaller sRGB triangle, and sRGB images will have some of their colors "crushed" when processed by the monitor's color profile in a color-aware application. In order to combat this, high end modern monitors like the Dell U2711H actually process and display colors at 10 bits per channel, 30 bits total. 30, 36, and 48 bit color representations are known as <i>Deep Color</i> and they allow the monitor to be significantly more precise in its color rendition, even if the physical panel is still limited to 8 bits per color. It also allows more precise color calibration. If your monitor and graphics card support it, applications like Photoshop can take advantage of deep color to display extremely accurate wide gamut colors. And that brings me to an unfortunate caveat.

<b>UPDATE:</b> I previously claimed that Radeons could output 30 bit Deep Color. This appears not to be the case; more to come. The paragraph below has been revised.
<b>Only AMD FirePro and NVIDIA Quadro chips support deep color, and only under Windows.</b> Intel chips do not have deep color support at all. NVIDIA GeForce and AMD Radeon chips have the necessary hardware for 30 bit output, but the drivers do not support it. Mac OSX, up to and including 10.7 Lion, cannot do 30 bit under any situation no matter what hardware you have. This is despite the fact that both AMD and NVIDIA explicitly advertise 30-bit support in a number of these cases.

<h1>Color Calibration</h1>
Color calibration is the process of aligning the gamut of a display to a desired color space. This applies both to devices that capture images (cameras, scanners) and devices that generate them (monitors, printers). These devices frequently have adjustable settings that will alter their color gamut, but those controls are not usually adequate to match a color space. In the case of computer monitors, calibration actually refers to two discrete steps. The first step, <em>calibration</em>, corrects the monitor's basic settings (brightness, contrast, hardware color settings) and graphics card settings to optimal values. The second step, <em>profiling</em>, measures the error between the gamut and the space, and encodes how to convert different color spaces to the actual gamut of the display as a software calibration profile. Manufacturers provide a default profile that describes the monitor, but calibration corrects the settings for your specific environment and screen. Monitor gamuts can shift over time, and calibration depends on the ambient conditions as well. Thus for truly accurate work, it is necessary to calibrate the monitor periodically, rather than set-and-forget.

Within the graphics card or monitor, there is a <i>look-up table</i> (LUT) that is used to pick the hardware output for a certain input. The LUT is used to provide basic calibration control for colors. For example, the red channel on your monitor may be too strong, so a calibrator could set the LUT entries for red 251-255 to output a red value of 250. In this case our color gamut has been corrected, but we've also lost color accuracy, since 256 input colors are now mapped to only 251 output colors. Depending on the hardware, this correction can happen at 6, 8, or 10 bit precision. 10 bit allows much more color detail, and so even in 8 bit mode, a 10 bit monitor's expanded LUT makes it much more capable of responding to color calibration accurately. The LUT is a global hardware setting that lives outside of any particular software, and so it will provide calibration to all programs regardless of whether they are color aware. However, the LUT only operates within the native gamut of the monitor. That is, it can correct an AdobeRGB image to display correctly on an AdobeRGB monitor, but it cannot convert between sRGB and AdobeRGB.

Color conversion and correction is handled by an <i>ICC profile</i>, sometimes called an ICM profile on Windows. The monitor typically has a default profile, and the profiling step of a color calibrator can create one customized to your display and environment. The profile describes how to convert from various color spaces to the gamut of the monitor correctly. On a perfectly calibrated monitor, we would expect the ICC profile to have no effect on colors that are in the same color space as the monitor. In reality the monitor's gamut never matches the color space perfectly, so the ICC profile may specify corrections even within the same color space. Its primary purpose, however, is to describe how to convert various color spaces to the monitor's color gamut. We can never display an AdobeRGB image correctly on an sRGB monitor, because the space is too wide. Instead the display must decide to how to convert colors that are <i>out of gamut</i>. One option is to simply force out of gamut colors to the nearest edge of the target gamut. This preserves color accuracy within the smaller space, but destroys detail in the out of gamut areas entirely. Alternately we can scale the entire space, which will lead to inaccurate colors everywhere but better preservation of color detail. I'll look at this dilemma in more detail in a future post.

The ICC profile is necessary to reproduce accurate colors on the monitor. This brings up an important point: <b>Hardware color calibration is ineffective for color-stupid applications when image and monitor color spaces do not match</b>. Consider the case of an sRGB image on an AdobeRGB monitor. A color stupid application will tell the monitor that these are sRGB colors. The LUT only specifies how to correct AdobeRGB colors, so for sRGB it simply changes one incorrect color to another. No amount of expense on calibration hardware will fix this problem.

In the case of a digital camera, it is not possible to alter the color response of the internal sensor. Instead, the sensor needs to be measured and corrected according to a profile. Tools like Adobe Camera Raw ship a set of default camera profiles containing this data. Unfortunately the correct calibration varies based on lighting conditions, camera settings like ISO, the lens in use, etc in unpredictable ways. For highly color-critical work (eg studio photography), it's common to use a product like the <a href="http://www.xritephoto.com/ph_product_overview.aspx?catid=28">X-Rite Color Checker</a> to acquire the correct colors for the shooting conditions. Either way, the calibration data is used in RAW conversion to determine final colors (along with other settings like white balance). The details of this process are at the discretion of the RAW conversion software. Adobe uses the profile (whether it's the built-in default or an X-Rite calibrated alternative) to move everything to the enormous ProPhotoRGB color space at 16 bits per color channel, 48 bits per pixel. This gives them the widest possible flexibility in editing and color outputs, but it is critical to understand what will happen when the data is baked into a more common output format. We'll see more of that in Part 3.

<h1>White Balance</h1>
What color is white? It's a tricky question, because it depends on lighting conditions and to some extent is a subjective choice. Day to day, the brain automatically corrects our perception of white for the environment. Digital devices have to pick a specific rendition of white, based on their hardware and processing algorithms. Mathematically, white is the dead center of our color space, the point where R, G, and B all balance perfectly. But that point itself is adjustable, controlled by a value we call the white balance. White balance is a range of tones that encompass "white", and it is defined primarily by a <i>color temperature</i>. You were probably told at some point that "white" light contains every color. Although it's true, the balance of those colors varies. The color temperature is actually a value from thermodynamic physics, and it describes a particular color spectrum emitted by any "black body" at a particular temperature in Kelvins. We'll ignore the apparent contradiction of terms and the physics in general. In short, cooler temperatures, 4000K and below, tend towards orange and red. Warmer temperatures, 6000K and above, are blue and eventually violet. 5000K is generally considered to be an even medium white and matches the average color of daylight (not to be confused with the color of the sky or sun). We can graph color temperatures on a chromaticity diagram:
<a href="http://en.wikipedia.org/wiki/File:PlanckianLocus.png"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/PlanckianLocus.png/533px-PlanckianLocus.png" width="400"></a>
The <i>white point</i> of a color space is the color temperature that it expects to correspond to mathematical white. In the case of sRGB and most digital devices, the white point is a particular <i>illuminant</i> known as D65, a theoretical white value roughly equivalent to a color temperature of 6504K. There's no point agonizing about the details here; simply remember that the standard white is 6500K. 

All digital devices have a native white point, derived from their physical parameters. In an LCD monitor, it comes from the color of the backlight. This color is usually close to, but not exactly 6500K. Correcting the white balance of the monitor is one of the biggest benefits of calibration, especially in multi-monitor situations. Because the hardware white point cannot be changed, these adjustments operate by correcting the individual channel intensities downwards, which reduces the color gamut. Thus a wider gamut display is more tolerant of color calibration, because it has more flexibility to compensate for shifts in white balance. Similarly, digital cameras capture all colors relative to a physical white point and white balance adjustments to photos will shift the entire gamut.

White balance is probably the most common color adjustment on photographs. As I said earlier, our brains constantly color correct our environments. Cameras don't have that luxury, and have to make a best guess about what to do with the incoming light. They will make a best guess and store that value along with the RAW data, but that guess can be changed later in processing for the final output. Most cameras allow the user to specify a particular white balance at capture time. Either way, white balance adjustment typically happens along two axes: color temperature (which we've already discussed) and green-magenta hue. The hue adjustment moves the colors perpendicular to the color temperature, functioning as a separate independent axis. You can see this most clearly on the diagram above where 6000K is marked, but depending on the color temperature in use the hue shift will not always be between green and magenta. For example, at 1500K, it appears to be between orange and green instead. If you skip back up, the chart of the sRGB space has its central D65 point marked. You can imagine that point shifting and the whole triangle pinned to it as we change the white balance. All of the points of the triangle will move in color space to center around the white point.

Be careful in how you use "warmer" and "cooler" in describing white balance, because it can get confusing quickly. If you've done photo work, you might notice that the chart displays the temperatures reversed from what you expect. The colors of a photo shift in the <i>opposite</i> direction of the white point, which leads to our common description of warm and cool colors. If you set the white point to a very cold value, neutral white is now considered to be a very yellow color, and all the colors of the photo are pushed into blue territory. If you pick a very warm color, blue is considered neutral and all our colors shift towards yellow. This is because the rest of our colors are effectively described relative to the white point, and the color temperature of the photograph is the physical temperature that gets mapped to RGB (1, 1, 1).

<h1>Summary</h1>
In this post, I talked about the basics of digital color representation. We looked at color spaces, the mathematical ranges of color, and gamuts, the actual ranges that devices can work in. We talked about the implications of images and devices in different spaces, and the importance of color-aware applications. Next I explained bit depth and color calibration, and closed with an overview of white point and white balance.

What's more interesting is what we did <i>not</i> cover yet. The discussion covered color, but not brightness. We know how to express various shades and tints, but not how to describe how bright they are (or the differences between brightness, luminance, and saturation). We also don't know how to put any of this knowledge into practical use in our graphics work. Those will be the subjects of Parts 2 and 3, respectively. 
